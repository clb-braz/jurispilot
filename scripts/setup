#!/bin/bash
# ============================================
# JurisPilot - Wrapper Universal de Setup
# ============================================
# Detecta automaticamente o sistema operacional e executa o script apropriado
# Execute: ./scripts/setup
# ============================================

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# Detecta OS
detect_os() {
    case "$(uname -s)" in
        Linux*)
            echo "linux"
            ;;
        Darwin*)
            echo "macos"
            ;;
        CYGWIN*|MINGW32*|MSYS*|MINGW*)
            echo "windows"
            ;;
        *)
            echo "unknown"
            ;;
    esac
}

OS=$(detect_os)

case "$OS" in
    windows)
        if [ -f "$SCRIPT_DIR/setup.ps1" ]; then
            echo "üöÄ Executando setup para Windows..."
            powershell.exe -ExecutionPolicy Bypass -File "$SCRIPT_DIR/setup.ps1" "$@"
        else
            echo "‚ùå Arquivo setup.ps1 n√£o encontrado"
            exit 1
        fi
        ;;
    macos|linux)
        if [ -f "$SCRIPT_DIR/setup.sh" ]; then
            echo "üöÄ Executando setup para $OS..."
            bash "$SCRIPT_DIR/setup.sh" "$@"
        else
            echo "‚ùå Arquivo setup.sh n√£o encontrado"
            exit 1
        fi
        ;;
    *)
        echo "‚ùå Sistema operacional n√£o suportado: $OS"
        echo "Execute manualmente:"
        echo "  Windows: .\scripts\setup.ps1"
        echo "  Mac/Linux: ./scripts/setup.sh"
        exit 1
        ;;
esac

